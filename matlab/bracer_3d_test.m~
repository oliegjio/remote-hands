t = tcpip('0.0.0.0', 7247, 'NetworkRole', 'server');
fopen(t);

while true
    if t.BytesAvailable
        data = fscanf(t);
        disp(data);
        
        splitted = strsplit(data);
        values = arrayfun(@(x) str2double(x), splitted);
        
        q1 = values(1);
        q2 = values(2);
        q3 = values(3);
        q4 = values(4);
        x = values(5);
        dy = values(6);
        z = values(7);
        
        plot3(x, y, z, '.');
        limit = [-100 100];
        xlim(limit);
        ylim(limit);
        zlim(limit);
        grid on;
        drawnow;
    end
end
